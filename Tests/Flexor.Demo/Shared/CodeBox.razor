@using Blazaco.Editor;
@using Blazaco.Editor.Options;

<MonacoEditor ref="editor" Model="@editorModel" Height="600" Width="800"/>

@functions {
    private EditorModel editorModel { get; set; }
    private MonacoEditor editor;


    [Parameter]
    protected string Value
    {
        get;
        set;
    }

    [Parameter]
    protected int Width { get; set; } = 400;

    [Parameter]
    protected int Height { get; set; } = 200;

    protected override async Task OnInitAsync()
    {
        await base.OnInitAsync();

        this.editorModel = new EditorModel()
        {
            Options = new EditorOptions
            {
                ReadOnly = true,
                Language = "text/html",
                Minimap = new MinimapOptions
                {
                    Enabled = false,
                },
                LineNumbers = "off",
                HideCursorInOverviewRuler = true,
                OverviewRulerBorder = false,
                OverviewRulerLanes = 0,
                RenderLineHighlight = "none",
                Contextmenu = false,
                ScrollBeyondLastLine = false,
            }
        };
    }


    public async void SetValue(string value)
    {
        await editor.SetValue(value);
    }

    protected override async Task OnAfterRenderAsync()
    {
        Console.WriteLine("CodeBox OnAfterRender");
        await base.OnAfterRenderAsync().ContinueWith(x => this.editor.SetValue(this.Value));
    }
}

